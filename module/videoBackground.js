"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}define(["jquery"],function(t){var e,o;e=this,o=function(c){var d="vidbg",i={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",overlay:!1,resizing:!0},u="Not implemented";function n(t){var e,o,i,n,r,s,a,p={};for(a=0,s=(r=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",")).length;a<s&&(-1===(o=r[a]).search(/^(http|https|ftp):\/\//)&&-1!==o.search(":"));a++)e=o.indexOf(":"),i=o.substring(0,e),(n=o.substring(e+1))||(n=void 0),"string"==typeof n&&(n="true"===n||"false"!==n&&n),"string"==typeof n&&(n=isNaN(n)?n:+n),p[i]=n;return null==i&&null==n?t:p}function r(t,e,o){this.$element=c(t),"string"==typeof e&&(e=n(e)),o?"string"==typeof o&&(o=n(o)):o={},this.settings=c.extend({},i,o),this.path=e;try{this.init()}catch(t){if(t.message!==u)throw t}}r.prototype.init=function(){var t,e,o=this,i=o.path,n=i,r="",s=o.$element,a=o.settings,p=function(t){var e,o,i,n=(t=""+t).split(/\s+/),r="50%",s="50%";for(i=0,e=n.length;i<e;i++)"left"===(o=n[i])?r="0%":"right"===o?r="100%":"top"===o?s="0%":"bottom"===o?s="100%":"center"===o?0===i?r="50%":s="50%":0===i?r=o:s=o;return{x:r,y:s}}(a.position);e=o.$wrapper=c('<div class="vidbg-container">').css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":p.x+" "+p.y}),"object"===_typeof(i)&&(i.poster?n=i.poster:i.mp4?n=i.mp4:i.webm&&(n=i.webm)),e.css("background-image","url("+n+")"),"static"===s.css("position")&&s.css("position","relative"),s.css("z-index","1"),s.is("body")&&e.css({position:"fixed"}),s.prepend(e),t="object"===_typeof(i)?(i.mp4&&(r+='<source src="'+i.mp4+'" type="video/mp4">'),i.webm&&(r+='<source src="'+i.webm+'" type="video/webm">'),o.$video=c("<video>"+r+"</video>")):o.$video=c('<video><source src="'+i+'" type="video/mp4"><source src="'+i+'" type="video/webm"></video>');try{t.prop({autoplay:a.autoplay,loop:a.loop,volume:a.volume,muted:a.muted,defaultMuted:a.muted,playbackRate:a.playbackRate,defaultPlaybackRate:a.playbackRate})}catch(t){throw new Error(u)}t.css({margin:"auto",position:"absolute","z-index":-1,top:p.y,left:p.x,"-webkit-transform":"translate(-"+p.x+", -"+p.y+")","-ms-transform":"translate(-"+p.x+", -"+p.y+")","-moz-transform":"translate(-"+p.x+", -"+p.y+")",transform:"translate(-"+p.x+", -"+p.y+")",visibility:"hidden",opacity:0}).one("canplaythrough."+d,function(){o.resize()}).one("playing."+d,function(){t.css({visibility:"visible",opacity:1}),e.css("background-image","none")}),s.on("resize."+d,function(){a.resizing&&o.resize()}),e.append(t),a.overlay&&c("<div class='vidbg-overlay' style='position:absolute;top:0;right:0;left:0;bottom:0;z-index:-1;background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSJ0cmFuc3BhcmVudCI+PC9yZWN0Pgo8cGF0aCBkPSJNMCA1TDUgMFpNNiA0TDQgNlpNLTEgMUwxIC0xWiIgc3Ryb2tlPSIjMjkyNzI3IiBzdHJva2Utd2lkdGg9IjMuMjUiIG9wYWNpdHk9Ii4yNSI+PC9wYXRoPgo8L3N2Zz4=);'></div>").insertAfter(c(".vidbg-container > video"))},r.prototype.getVideoObject=function(){return this.$video[0]},r.prototype.resize=function(){if(this.$video){var t=this.$wrapper,e=this.$video,o=e[0],i=o.videoHeight,n=o.videoWidth,r=t.height(),s=t.width();r/i<s/n?e.css({width:s+2,height:"auto"}):e.css({width:"auto",height:r+2})}},r.prototype.destroy=function(){delete c[d].lookup[this.index],this.$video&&this.$video.off(d),this.$element.off(d).removeData(d),this.$wrapper.remove()},c[d]={lookup:[]},c.fn[d]=function(t,e){var o;return this.each(function(){(o=c.data(this,d))&&o.destroy(),(o=new r(this,t,e)).index=c[d].lookup.push(o)-1,c.data(this,d,o)}),this},c(document).ready(function(){var t=c(window);t.on("resize."+d,function(){for(var t,e=c[d].lookup.length,o=0;o<e;o++)(t=c[d].lookup[o])&&t.settings.resizing&&t.resize()}),t.on("unload."+d,function(){return!1}),c(document).find("[data-vidbg-bg]").each(function(t,e){var o=c(e),i=o.data(d+"-options"),n=o.data(d+"-bg");o[d](n,i)})})},"function"==typeof define&&define.amd?define(["jquery"],o):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?o(require("jquery")):o(e.jQuery)});